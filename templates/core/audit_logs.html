{% extends "base.html" %}
{% block title %}SGEA - Logs de Auditoria{% endblock %}

{% block content %}
<div class="container" style="max-width: 900px; margin: 3rem auto;">
  <div style="background-color: #fff; padding: 2rem; border-radius: 16px; box-shadow: 0 4px 20px rgba(0,0,0,0.05);">
    <h2 style="font-size: 2rem; color: #43054E; margin-bottom: 0.5rem; text-align: center;">Logs de Auditoria</h2>
    <p style="text-align: center; color: #777; margin-bottom: 2rem;">
      Registro de ações realizadas no sistema para fins de auditoria e segurança.
    </p>

    <!-- Tabela centralizada com linhas visíveis -->
    <div class="table-responsive" style="display: flex; justify-content: center;">
      <table class="table" style="width: 95%; margin: 0 auto; table-layout: fixed; border-collapse: collapse; border: 1px solid #43054E;">
        <thead style="background-color: #43054E; color: white;">
          <tr>
            <th style="text-align: center; width: 33%; border: 1px solid #43054E;">Ação</th>
            <th style="text-align: center; width: 33%; border: 1px solid #43054E;">Usuário</th>
            <th style="text-align: center; width: 33%; border: 1px solid #43054E;">Data/Hora</th>
          </tr>
        </thead>
        <tbody>
          {% for log in logs %}
          <tr>
            <td style="text-align: center; border: 1px solid #43054E;">{{ log.action }}</td>
            <td style="text-align: center; border: 1px solid #43054E;">
              {% if log.user %}{{ log.user }}{% else %}<span class="text-muted">Desconhecido</span>{% endif %}
            </td>
            <td style="text-align: center; white-space: nowrap; border: 1px solid #43054E;">{{ log.timestamp|date:"d/m/Y H:i" }}</td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="3" class="text-center text-muted" style="border: 1px solid #43054E;">Nenhum log encontrado.</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

    <!-- Paginação -->
    {% if logs.has_other_pages %}
    <div style="display: flex; justify-content: center; align-items: center; gap: 2rem; margin-top: 2.5rem;">
      {% if logs.has_previous %}
      <a href="?page={{ logs.previous_page_number }}" 
         class="btn-paginacao">
        ⬅ Anterior
      </a>
      {% endif %}

      <span style="font-size:1rem; color:#43054E; font-weight:600;">
        Página {{ logs.number }} de {{ logs.paginator.num_pages }}
      </span>

      {% if logs.has_next %}
      <a href="?page={{ logs.next_page_number }}" 
         class="btn-paginacao">
        Próxima ➡
      </a>
      {% endif %}
    </div>
    {% endif %}
  </div>
</div>

<style>
  .btn-paginacao {
    background-color: #43054E;
    color: white;
    padding: 0.6rem 1.4rem;
    border-radius: 8px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    text-decoration: none;
    font-size: 1rem;
    transition: all 0.3s ease;
  }

  .btn-paginacao:hover {
    transform: translateY(-3px) scale(1.05);
    box-shadow: 0 6px 14px rgba(0,0,0,0.25);
  }
</style>
{% endblock %}
