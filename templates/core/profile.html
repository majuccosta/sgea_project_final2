{% extends 'base.html' %}
{% block title %}Perfil - SGEA{% endblock %}

{% block content %}
<div class="container" style="max-width: 700px; margin: 3rem auto;">
  <h2 style="color: #43054E; margin-bottom: 1rem;">ğŸ‘¤ Meu Perfil</h2>

  <div style="background-color: #fff; border-left: 6px solid #E63973; padding: 2rem; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
    <p><strong>UsuÃ¡rio:</strong> {{ user.username }}</p>
    <p><strong>Nome:</strong> {{ user.first_name }}</p>
    <p><strong>Email:</strong> {{ user.email }}</p>
    <p><strong>Telefone:</strong> {{ user.phone|default:"NÃ£o informado" }}</p>

    <hr style="margin: 1.5rem 0;">

    {% if user.role == 'organizer' %}
      <h4 style="color: #43054E;">ğŸ“Œ Meus Eventos Organizados</h4>
      {% if organized_events %}
        <div style="display: grid; gap: 1rem;">
          {% for event in organized_events %}
            <div style="border: 1px solid #E63973; border-radius: 12px; padding: 1rem; background-color: #FDF6F9; box-shadow: 0 1px 5px rgba(0,0,0,0.05);">
              <h5 style="margin: 0 0 0.5rem 0;">{{ event.title }}</h5>
              <p style="margin: 0.2rem 0;"><strong>Tipo:</strong> {{ event.get_event_type_display }}</p>
              <p style="margin: 0.2rem 0;"><strong>Data:</strong> {{ event.start_date }} - {{ event.end_date }}</p>
              <p style="margin: 0.2rem 0;"><strong>Local:</strong> {{ event.location }}</p>
            </div>
          {% endfor %}
        </div>
      {% else %}
        <p>Ainda nÃ£o criou nenhum evento.</p>
      {% endif %}
    {% else %}
      <h4 style="color: #43054E;">ğŸ“… Meus Eventos Inscritos</h4>
      {% if registered_events %}
        <div style="display: grid; gap: 1rem;">
          {% for event in registered_events %}
            <div style="border: 1px solid #E63973; border-radius: 12px; padding: 1rem; background-color: #FDF6F9; box-shadow: 0 1px 5px rgba(0,0,0,0.05);">
              <h5 style="margin: 0 0 0.5rem 0;">{{ event.title }}</h5>
              <p style="margin: 0.2rem 0;"><strong>Tipo:</strong> {{ event.get_event_type_display }}</p>
              <p style="margin: 0.2rem 0;"><strong>Data:</strong> {{ event.start_date }} - {{ event.end_date }}</p>
              <p style="margin: 0.2rem 0;"><strong>Local:</strong> {{ event.location }}</p>
            </div>
          {% endfor %}
        </div>
      {% else %}
        <p>VocÃª ainda nÃ£o estÃ¡ inscrito em nenhum evento.</p>
      {% endif %}
    {% endif %}

    <div style="margin-top: 2rem; text-align: center;">
      <a href="{% url 'core:edit_profile' %}" class="btn">âœï¸ Editar perfil</a>
      <a href="{% url 'core:logout' %}" class="btn" style="background-color: #ccc; color: #43054E; margin-left: 1rem;">Sair</a>
    </div>
  </div>
</div>
{% endblock %}
